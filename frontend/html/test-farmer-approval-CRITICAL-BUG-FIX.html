<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ”§ CRITICAL BUG FIX - Farmer Approval Testing</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .header {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 20px;
            text-align: center;
        }
        
        .header h1 {
            color: #d32f2f;
            font-size: 28px;
            margin-bottom: 10px;
        }
        
        .header p {
            color: #666;
            font-size: 16px;
        }
        
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .card h2 {
            color: #333;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #667eea;
            font-size: 20px;
        }
        
        .btn {
            width: 100%;
            padding: 15px;
            margin: 10px 0;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn-primary {
            background: #667eea;
            color: white;
        }
        
        .btn-primary:hover {
            background: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        .btn-success {
            background: #4caf50;
            color: white;
        }
        
        .btn-success:hover {
            background: #45a049;
        }
        
        .btn-danger {
            background: #f44336;
            color: white;
        }
        
        .btn-danger:hover {
            background: #da190b;
        }
        
        .btn-warning {
            background: #ff9800;
            color: white;
        }
        
        .btn-warning:hover {
            background: #e68900;
        }
        
        .status-box {
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
            font-weight: bold;
        }
        
        .status-pending {
            background: #fff3cd;
            color: #856404;
            border: 2px solid #ffc107;
        }
        
        .status-approved {
            background: #d4edda;
            color: #155724;
            border: 2px solid #28a745;
        }
        
        .status-error {
            background: #f8d7da;
            color: #721c24;
            border: 2px solid #dc3545;
        }
        
        .log-container {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            max-height: 600px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.6;
        }
        
        .log-entry {
            margin: 5px 0;
            padding: 5px;
        }
        
        .log-success {
            color: #4caf50;
        }
        
        .log-error {
            color: #f44336;
        }
        
        .log-warning {
            color: #ff9800;
        }
        
        .log-info {
            color: #2196f3;
        }
        
        .farmer-info {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
        }
        
        .farmer-info p {
            margin: 5px 0;
            color: #333;
        }
        
        .farmer-info strong {
            color: #667eea;
        }
        
        .critical-warning {
            background: #ffebee;
            border: 3px solid #d32f2f;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        
        .critical-warning h3 {
            color: #d32f2f;
            margin-bottom: 10px;
        }
        
        .critical-warning ul {
            margin-left: 20px;
            color: #333;
        }
        
        .critical-warning li {
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ› CRITICAL BUG FIX - Farmer Approval System</h1>
            <p>Complete End-to-End Testing with Database Verification</p>
        </div>

        <div class="critical-warning">
            <h3>âš ï¸ CRITICAL BUG BEING FIXED:</h3>
            <ul>
                <li>âœ… Buttons DO respond (frontend works)</li>
                <li>âŒ Database value DOES NOT update (backend issue)</li>
                <li>âŒ Farmer login STILL says "Waiting for Admin Approval"</li>
                <li>ğŸ”§ This test page will PROVE where the bug is happening</li>
            </ul>
        </div>

        <div class="grid">
            <div class="card">
                <h2>Step 1: Admin Login</h2>
                <button class="btn btn-primary" onclick="adminLogin()">
                    ğŸ” Login as Admin
                </button>
                <div id="adminStatus" class="status-box status-pending" style="display: none;">
                    Waiting...
                </div>
            </div>

            <div class="card">
                <h2>Step 2: Fetch Farmers</h2>
                <button class="btn btn-primary" onclick="fetchFarmers()" id="fetchBtn" disabled>
                    ğŸ“‹ Fetch Pending Farmers
                </button>
                <div id="farmerCount" style="margin-top: 10px; font-weight: bold;"></div>
            </div>

            <div class="card">
                <h2>Step 3: Approve Farmer</h2>
                <button class="btn btn-success" onclick="approveFarmer()" id="approveBtn" disabled>
                    âœ… APPROVE FARMER
                </button>
                <div id="approveStatus" class="status-box status-pending" style="display: none;">
                    Waiting...
                </div>
            </div>

            <div class="card">
                <h2>Step 4: Verify Database</h2>
                <button class="btn btn-warning" onclick="verifyDatabase()" id="verifyBtn" disabled>
                    ğŸ” Check Database Status
                </button>
                <div id="dbStatus" class="status-box status-pending" style="display: none;">
                    Waiting...
                </div>
            </div>

            <div class="card">
                <h2>Step 5: Test Farmer Login</h2>
                <button class="btn btn-success" onclick="testFarmerLogin()" id="loginBtn" disabled>
                    ğŸ”‘ Test Farmer Login
                </button>
                <div id="loginStatus" class="status-box status-pending" style="display: none;">
                    Waiting...
                </div>
            </div>

            <div class="card">
                <h2>Quick Actions</h2>
                <button class="btn btn-danger" onclick="clearLogs()">
                    ğŸ—‘ï¸ Clear Logs
                </button>
                <button class="btn btn-warning" onclick="runFullTest()" id="fullTestBtn">
                    ğŸš€ Run Full Test (All Steps)
                </button>
            </div>
        </div>

        <div class="card">
            <h2>ğŸ“Š Farmer Information</h2>
            <div id="farmerInfo" class="farmer-info">
                <p>No farmer data loaded yet. Click "Fetch Pending Farmers" first.</p>
            </div>
        </div>

        <div class="card">
            <h2>ğŸ“ Real-Time Debug Log</h2>
            <div id="logContainer" class="log-container">
                <div class="log-entry log-info">ğŸ”§ Debug console initialized. Ready to test farmer approval bug fix.</div>
            </div>
        </div>
    </div>

    <script>
        const API_URL = 'http://localhost:3000/api';
        let adminToken = null;
        let currentFarmer = null;

        function log(message, type = 'info') {
            const logContainer = document.getElementById('logContainer');
            const timestamp = new Date().toLocaleTimeString();
            const colors = {
                success: 'log-success',
                error: 'log-error',
                warning: 'log-warning',
                info: 'log-info'
            };
            
            const entry = document.createElement('div');
            entry.className = `log-entry ${colors[type]}`;
            entry.textContent = `[${timestamp}] ${message}`;
            logContainer.appendChild(entry);
            logContainer.scrollTop = logContainer.scrollHeight;
        }

        function updateStatus(elementId, message, type) {
            const element = document.getElementById(elementId);
            element.style.display = 'block';
            element.textContent = message;
            element.className = `status-box status-${type}`;
        }

        function clearLogs() {
            document.getElementById('logContainer').innerHTML = '<div class="log-entry log-info">ğŸ”§ Debug console cleared.</div>';
        }

        async function adminLogin() {
            try {
                log('ğŸ” Step 1: Logging in as admin...', 'info');
                updateStatus('adminStatus', 'Logging in...', 'pending');

                const response = await fetch(`${API_URL}/admin/login`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        email: 'admin@krushimithra.com',
                        password: 'Admin@12345'
                    })
                });

                const data = await response.json();
                
                if (data.success) {
                    adminToken = data.token;
                    log('âœ… Admin login successful!', 'success');
                    log(`ğŸ‘¤ Logged in as: ${data.admin.email}`, 'success');
                    updateStatus('adminStatus', 'âœ… Logged In', 'approved');
                    document.getElementById('fetchBtn').disabled = false;
                    return true;
                } else {
                    throw new Error(data.message);
                }
            } catch (error) {
                log(`âŒ Admin login failed: ${error.message}`, 'error');
                updateStatus('adminStatus', 'âŒ Login Failed', 'error');
                return false;
            }
        }

        async function fetchFarmers() {
            try {
                log('ğŸ“‹ Step 2: Fetching pending farmers from database...', 'info');

                const response = await fetch(`${API_URL}/admin/farmers?status=pending`, {
                    headers: { 'Authorization': `Bearer ${adminToken}` }
                });

                const data = await response.json();
                
                if (data.success && data.farmers && data.farmers.length > 0) {
                    currentFarmer = data.farmers[0];
                    log(`âœ… Found ${data.farmers.length} pending farmer(s)`, 'success');
                    log(`ğŸ‘¤ First farmer: ${currentFarmer.email}`, 'info');
                    log(`ğŸ“ ID: ${currentFarmer._id}`, 'info');
                    log(`ğŸ“Š Current status: ${currentFarmer.status}`, 'warning');
                    
                    document.getElementById('farmerCount').textContent = `âœ… Found: ${data.farmers.length} farmer(s)`;
                    document.getElementById('farmerCount').style.color = '#4caf50';
                    
                    // Display farmer info
                    const farmerInfo = document.getElementById('farmerInfo');
                    farmerInfo.innerHTML = `
                        <p><strong>Full Name:</strong> ${currentFarmer.fullName || 'N/A'}</p>
                        <p><strong>Email:</strong> ${currentFarmer.email}</p>
                        <p><strong>Mobile:</strong> ${currentFarmer.mobile || 'N/A'}</p>
                        <p><strong>Location:</strong> ${currentFarmer.location || 'N/A'}</p>
                        <p><strong>Crop Type:</strong> ${currentFarmer.cropType || 'N/A'}</p>
                        <p><strong>Current Status:</strong> <span style="color: #ff9800; font-weight: bold;">${currentFarmer.status}</span></p>
                        <p><strong>Farmer ID:</strong> ${currentFarmer._id}</p>
                    `;
                    
                    document.getElementById('approveBtn').disabled = false;
                    return true;
                } else {
                    log('âš ï¸  No pending farmers found', 'warning');
                    document.getElementById('farmerCount').textContent = 'âš ï¸  No pending farmers';
                    document.getElementById('farmerCount').style.color = '#ff9800';
                    
                    document.getElementById('farmerInfo').innerHTML = '<p>No pending farmers found. Register a new farmer first.</p>';
                    return false;
                }
            } catch (error) {
                log(`âŒ Failed to fetch farmers: ${error.message}`, 'error');
                return false;
            }
        }

        async function approveFarmer() {
            if (!currentFarmer) {
                log('âŒ No farmer selected. Fetch farmers first.', 'error');
                return;
            }

            try {
                log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•', 'info');
                log('ğŸš€ Step 3: APPROVING FARMER - CRITICAL TEST', 'warning');
                log(`ğŸ“ Farmer ID: ${currentFarmer._id}`, 'info');
                log(`ğŸ“§ Email: ${currentFarmer.email}`, 'info');
                log(`ğŸ“Š Current Status: ${currentFarmer.status}`, 'info');
                updateStatus('approveStatus', 'Sending approval request...', 'pending');

                const startTime = Date.now();
                const response = await fetch(`${API_URL}/admin/farmers/${currentFarmer._id}/approve`, {
                    method: 'PUT',
                    headers: {
                        'Authorization': `Bearer ${adminToken}`,
                        'Content-Type': 'application/json'
                    }
                });

                const endTime = Date.now();
                const data = await response.json();
                
                log(`â±ï¸  Response time: ${endTime - startTime}ms`, 'info');
                log(`ğŸ“¥ Response status: ${response.status}`, 'info');
                log(`ğŸ“¦ Response data: ${JSON.stringify(data, null, 2)}`, 'info');

                if (data.success) {
                    log('âœ… Approval API call successful!', 'success');
                    log(`ğŸ“Š Returned status: ${data.farmer.status}`, 'success');
                    updateStatus('approveStatus', 'âœ… API Call Successful', 'approved');
                    
                    // Update local farmer object
                    currentFarmer = data.farmer;
                    
                    // Update farmer info display
                    const farmerInfo = document.getElementById('farmerInfo');
                    const statusColor = data.farmer.status === 'approved' ? '#4caf50' : '#ff9800';
                    farmerInfo.innerHTML = `
                        <p><strong>Full Name:</strong> ${currentFarmer.fullName || 'N/A'}</p>
                        <p><strong>Email:</strong> ${currentFarmer.email}</p>
                        <p><strong>Mobile:</strong> ${currentFarmer.mobile || 'N/A'}</p>
                        <p><strong>Location:</strong> ${currentFarmer.location || 'N/A'}</p>
                        <p><strong>Crop Type:</strong> ${currentFarmer.cropType || 'N/A'}</p>
                        <p><strong>Current Status:</strong> <span style="color: ${statusColor}; font-weight: bold; font-size: 18px;">${currentFarmer.status}</span></p>
                        <p><strong>Approved At:</strong> ${currentFarmer.approvedAt || 'N/A'}</p>
                        <p><strong>Farmer ID:</strong> ${currentFarmer._id}</p>
                    `;
                    
                    log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•', 'info');
                    log('âš ï¸  NOW THE CRITICAL QUESTION:', 'warning');
                    log('ğŸ” Did the database ACTUALLY update?', 'warning');
                    log('ğŸ“Œ Next: Click "Check Database Status" to verify!', 'warning');
                    log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•', 'info');
                    
                    document.getElementById('verifyBtn').disabled = false;
                    return true;
                } else {
                    throw new Error(data.message);
                }
            } catch (error) {
                log(`âŒ Approval failed: ${error.message}`, 'error');
                updateStatus('approveStatus', 'âŒ Failed', 'error');
                return false;
            }
        }

        async function verifyDatabase() {
            if (!currentFarmer) {
                log('âŒ No farmer to verify. Complete steps 1-3 first.', 'error');
                return;
            }

            try {
                log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•', 'info');
                log('ğŸ” Step 4: VERIFYING DATABASE - CRITICAL MOMENT', 'warning');
                log('ğŸ“Œ This will fetch the farmer DIRECTLY from MongoDB', 'info');
                log('ğŸ“Œ This proves if the database actually updated', 'info');
                updateStatus('dbStatus', 'Querying database...', 'pending');

                const response = await fetch(`${API_URL}/admin/farmers/${currentFarmer._id}/debug`, {
                    headers: { 'Authorization': `Bearer ${adminToken}` }
                });

                const data = await response.json();
                
                log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•', 'info');
                log('ğŸ“Š DATABASE VERIFICATION RESULTS:', 'warning');
                log(`âœ… Farmer found in database: ${data.success}`, data.success ? 'success' : 'error');
                
                if (data.success) {
                    log(`ğŸ“§ Email: ${data.farmer.email}`, 'info');
                    log(`ğŸ“Š Database Status: ${data.rawStatus}`, data.rawStatus === 'approved' ? 'success' : 'error');
                    log(`ğŸ” Status Type: ${data.statusType}`, 'info');
                    log(`âœ… Is Approved: ${data.isApproved}`, data.isApproved ? 'success' : 'error');
                    log(`â³ Is Pending: ${data.isPending}`, data.isPending ? 'warning' : 'success');
                    log(`ğŸ“… Approved At: ${data.farmer.approvedAt || 'NOT SET'}`, data.farmer.approvedAt ? 'success' : 'error');
                    log(`ğŸ‘¤ Approved By: ${data.farmer.approvedBy || 'NOT SET'}`, data.farmer.approvedBy ? 'success' : 'error');
                    
                    log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•', 'info');
                    
                    if (data.rawStatus === 'approved') {
                        log('âœ…âœ…âœ… SUCCESS! Database IS updated to APPROVED!', 'success');
                        log('ğŸ“Œ The bug might be in farmer login checking wrong field', 'warning');
                        updateStatus('dbStatus', 'âœ… Database APPROVED', 'approved');
                        document.getElementById('loginBtn').disabled = false;
                    } else {
                        log('âŒâŒâŒ CRITICAL BUG CONFIRMED!', 'error');
                        log('âŒ Database status is STILL: ' + data.rawStatus, 'error');
                        log('âŒ The API says success but database did NOT update!', 'error');
                        updateStatus('dbStatus', 'âŒ Database NOT Updated', 'error');
                    }
                    
                    log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•', 'info');
                    return data.rawStatus === 'approved';
                } else {
                    log('âŒ Farmer not found in database', 'error');
                    updateStatus('dbStatus', 'âŒ Not Found', 'error');
                    return false;
                }
            } catch (error) {
                log(`âŒ Database verification failed: ${error.message}`, 'error');
                updateStatus('dbStatus', 'âŒ Verification Failed', 'error');
                return false;
            }
        }

        async function testFarmerLogin() {
            if (!currentFarmer) {
                log('âŒ No farmer to test. Complete steps 1-4 first.', 'error');
                return;
            }

            try {
                log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•', 'info');
                log('ğŸ”‘ Step 5: TESTING FARMER LOGIN - FINAL TEST', 'warning');
                log(`ğŸ“§ Attempting login as: ${currentFarmer.email}`, 'info');
                updateStatus('loginStatus', 'Testing login...', 'pending');

                // Note: This assumes the farmer's password. You'll need to know it or create a test farmer with known password.
                const testPassword = prompt(`Enter password for ${currentFarmer.email}:`, 'Farmer@123');
                
                if (!testPassword) {
                    log('âŒ Login test cancelled', 'warning');
                    return;
                }

                const response = await fetch(`${API_URL}/farmers/login`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        email: currentFarmer.email,
                        password: testPassword
                    })
                });

                const data = await response.json();
                
                log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•', 'info');
                log('ğŸ”‘ FARMER LOGIN TEST RESULTS:', 'warning');
                log(`ğŸ“Š Response status: ${response.status}`, 'info');
                log(`âœ… Login success: ${data.success}`, data.success ? 'success' : 'error');
                log(`ğŸ“ Message: ${data.message}`, data.success ? 'success' : 'error');
                
                if (data.success) {
                    log('âœ…âœ…âœ… FARMER LOGIN SUCCESSFUL!', 'success');
                    log('âœ… The bug is FIXED! Farmer can now login!', 'success');
                    log(`ğŸ‘¤ Logged in as: ${data.farmer.fullName}`, 'success');
                    log(`ğŸ« Token received: ${data.token.substring(0, 20)}...`, 'success');
                    updateStatus('loginStatus', 'âœ… Login Successful!', 'approved');
                    
                    log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•', 'info');
                    log('ğŸ‰ END-TO-END TEST PASSED!', 'success');
                    log('âœ… Approval works', 'success');
                    log('âœ… Database updates', 'success');
                    log('âœ… Farmer can login', 'success');
                    log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•', 'info');
                } else {
                    log('âŒâŒâŒ FARMER LOGIN FAILED!', 'error');
                    log(`âŒ Error: ${data.message}`, 'error');
                    log(`ğŸ“Š Status returned: ${data.status}`, 'error');
                    
                    if (data.status === 'PENDING') {
                        log('âŒ CRITICAL BUG STILL EXISTS!', 'error');
                        log('âŒ Farmer status is still PENDING in database', 'error');
                        log('âŒ OR farmer login is checking wrong field/collection', 'error');
                    }
                    
                    updateStatus('loginStatus', 'âŒ Login Failed', 'error');
                }
                
                log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•', 'info');
                
            } catch (error) {
                log(`âŒ Login test failed: ${error.message}`, 'error');
                updateStatus('loginStatus', 'âŒ Test Failed', 'error');
            }
        }

        async function runFullTest() {
            log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•', 'info');
            log('ğŸš€ RUNNING FULL END-TO-END TEST', 'warning');
            log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•', 'info');
            
            document.getElementById('fullTestBtn').disabled = true;
            
            const step1 = await adminLogin();
            if (!step1) {
                log('âŒ Full test failed at step 1', 'error');
                document.getElementById('fullTestBtn').disabled = false;
                return;
            }
            
            await new Promise(resolve => setTimeout(resolve, 1000));
            
            const step2 = await fetchFarmers();
            if (!step2) {
                log('âŒ Full test failed at step 2', 'error');
                document.getElementById('fullTestBtn').disabled = false;
                return;
            }
            
            await new Promise(resolve => setTimeout(resolve, 1000));
            
            const step3 = await approveFarmer();
            if (!step3) {
                log('âŒ Full test failed at step 3', 'error');
                document.getElementById('fullTestBtn').disabled = false;
                return;
            }
            
            await new Promise(resolve => setTimeout(resolve, 1000));
            
            const step4 = await verifyDatabase();
            if (!step4) {
                log('âŒ Full test failed at step 4', 'error');
                document.getElementById('fullTestBtn').disabled = false;
                return;
            }
            
            await new Promise(resolve => setTimeout(resolve, 1000));
            
            await testFarmerLogin();
            
            document.getElementById('fullTestBtn').disabled = false;
            
            log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•', 'info');
            log('âœ… FULL TEST SEQUENCE COMPLETED', 'success');
            log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•', 'info');
        }

        // Show instructions on load
        window.addEventListener('load', () => {
            log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•', 'info');
            log('ğŸ“š INSTRUCTIONS:', 'info');
            log('1. Click "Login as Admin" to authenticate', 'info');
            log('2. Click "Fetch Pending Farmers" to load farmers', 'info');
            log('3. Click "APPROVE FARMER" to update status', 'info');
            log('4. Click "Check Database Status" to verify database', 'info');
            log('5. Click "Test Farmer Login" to confirm fix', 'info');
            log('', 'info');
            log('OR click "Run Full Test" to execute all steps automatically', 'info');
            log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•', 'info');
        });
    </script>
</body>
</html>
